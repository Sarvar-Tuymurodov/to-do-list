const toDoObj={id:"",title:"",checked:!1,isEditing:!1};let toDoArray=[{id:"23lf-2bs2-wefij-sdfjs",title:"Random Title",checked:!1,isEditing:!1},{id:"23lf-2bs2-wesij-sdfjs",title:"Random Title 2",checked:!0,isEditing:!1},{id:"23lf-2bs2-wewij-sdfjs",title:"Random Title 3",checked:!1,isEditing:!1}];const getFromStorage=()=>{JSON.parse(localStorage.getItem("toDoList"))&&(toDoArray=JSON.parse(localStorage.getItem("toDoList")))},saveToStorage=()=>{localStorage.setItem("toDoList",JSON.stringify(toDoArray))},getToDoItem=e=>toDoArray.find(t=>t.id==e),setToDoItem=e=>{const{title:t=null,checked:o=!1,id:c}=e;toDoArray.forEach(e=>{e.id==c&&(e.checked=o,e.title=t)})},editToDo=e=>{const{editIcon:t,confirmIcon:o,cancelIcon:c,toDoInput:d}=e;t.classList.remove("show"),o.classList.add("show"),c.classList.add("show"),d.readOnly=!1,d.classList.add("editing")},cancelEditing=e=>{const{editIcon:t,confirmIcon:o,cancelIcon:c,toDoInput:d,idToDo:i}=e;t.classList.add("show"),o.classList.remove("show"),c.classList.remove("show"),d.readOnly=!0,d.classList.remove("editing");const s=getToDoItem(i);d.value=s.title},confirmEditing=e=>{const{editIcon:t,confirmIcon:o,cancelIcon:c,toDoInput:d,idToDo:i,inputCheckBox:s}=e;t.classList.add("show"),o.classList.remove("show"),c.classList.remove("show"),d.readOnly=!0,d.classList.remove("editing");const n={title:d.value,id:i,checked:s.checked};setToDoItem(n),saveToStorage()},removeToDo=e=>{const{idToDo:t}=e,o=toDoArray.findIndex(e=>e.id==t);toDoArray.splice(o,1),generateToDoList(),saveToStorage()},isCheckedCheck=e=>{const{parentElem:t,checkBox:o}=e;o.checked?t.classList.add("checked"):t.classList.remove("checked")},toDoChecked=e=>{const{inputCheckBox:t,toDoInput:o,idToDo:c}=e,d={title:o.value,id:c,checked:t.checked};setToDoItem(d),saveToStorage()},addToDoToList=e=>{document.getElementById("toDoList").append(e)},todoItemTemplateAdd=e=>{const t=document.createElement("div");t.classList.add("to-do__item");const o=document.createElement("input");o.type="checkbox",o.classList.add("to-do__item--checkbox"),o.checked=e.checked;const c=document.createElement("input");c.type="text",c.readOnly=!0,c.classList.add("to-do__item--input"),c.value=e.title;const d=document.createElement("div");d.classList.add("to-do__item--actions");const i=document.createElement("div");i.classList.add("to-do__item--edit");const s=document.createElement("div");s.classList.add("to-do__item--edit-icon","show");const n=document.createElement("div");n.classList.add("to-do__item--confirm-edit");const a=document.createElement("div");a.classList.add("to-do__item--cancel-edit");const l=document.createElement("div");l.classList.add("to-do__item--remove","show");const r={inputCheckBox:o,editIcon:s,confirmIcon:n,cancelIcon:a,toDoInput:c,idToDo:e.id};isCheckedCheck({parentElem:t,checkBox:o}),o.addEventListener("change",()=>{toDoChecked(r),isCheckedCheck({parentElem:t,checkBox:o})}),s.addEventListener("click",()=>{editToDo(r)}),a.addEventListener("click",()=>{cancelEditing(r)}),n.addEventListener("click",()=>{confirmEditing(r)}),l.addEventListener("click",()=>{removeToDo(r)}),i.append(s,n,a),d.append(i,l),t.append(o,c,d),addToDoToList(t)},generateToDoList=()=>{const e=document.getElementById("toDoList");e.innerHTML="",toDoArray.length?toDoArray.forEach(e=>{todoItemTemplateAdd(e)}):e.innerHTML="To Do is empty"},addOnSubmit=()=>{const e=document.getElementById("toDoForm"),t=document.getElementById("toDoAddInput"),o=document.getElementById("toDoList");e.addEventListener("submit",function(e){e.preventDefault();const c=Object.assign({},toDoObj);c.id=Date.now(),c.title=t.value,toDoArray.length||(o.innerHTML=""),todoItemTemplateAdd(c),toDoArray.push(c),saveToStorage(),t.value=""})};document.addEventListener("DOMContentLoaded",()=>{JSON.parse(localStorage.getItem("toDoList"))&&(toDoArray=JSON.parse(localStorage.getItem("toDoList"))),generateToDoList(),addOnSubmit()});